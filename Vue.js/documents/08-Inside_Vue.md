# Vue 내부 살펴보기  
[1. Vue 반응성 소개](#1-vue-반응성-소개)  
[2. Vue 반응성 심층 분석](#2-vue-반응성-심층-분석)  
[3. 하나의 앱 vs 여러 앱](#3-하나의-앱-vs-여러-앱)  
[4. 탬플릿 이해하기](#4-탬플릿-이해하기)  
[5. Ref(참조) 활용하기](#5-ref참조-활용하기)  
[6. Vue가 DOM을 업데이트하는 방법](#6-vue가-dom을-업데이트하는-방법)  
[7. Vue 앱 생명주기 - 이론](#7-vue-앱-생명주기---이론)  
[8. Vue 앱 생명주기 - 실습](#8-vue-앱-생명주기---실습)  

# 1. Vue 반응성 소개

Vue는 JavaScript 기능인 프록시를 사용하여 데이터 객체를 반응형으로 만든다. 프록시는 객체의 프로퍼티에 접근할 때 중간에서 가로채는 역할을 함.  

Vue에서 데이터 객체인 `data`의 프로퍼티를 접근하면 프록시가 이를 가로채고, 데이터의 변경을 추적한다. 데이터에 새로운 값이 할당되면 Vue는 이를 감지하고 제어하는 HTML 코드를 스캔하여 변경 사항이 있는 프로퍼티를 확인함.  

변경 사항이 감지되면 Vue는 해당 동적 콘텐츠가 표시되는 올바른 위치를 찾고, 화면에 나타나는 페이지를 변경 사항에 맞게 업데이트함. 이 과정은 Vue의 내장 반응성 기능으로 자동으로 실행된다.  

이러한 반응성 시스템을 통해 Vue는 데이터의 변경을 감지하고 화면을 자동으로 업데이트하여 사용자에게 실시간으로 반영됨.  

# 2. Vue 반응성 심층 분석

- Vue는 JavaScript의 내장 기능인 프록시(Proxy)를 사용하여 반응성을 구현함.
- JavaScript에서는 기본적으로 반응형이 아니기 때문에 변수 변경에 따라 연산이 자동으로 업데이트되지 않음.
- Vue는 내부적으로 프록시를 사용하여 데이터의 변경을 감지하고 관련된 부분을 업데이트함.
- 프록시를 이용하여 객체를 래핑하면 객체의 변경 사항을 감지할 수 있으며, 변경이 발생하면 설정한 트랩(Trap)이 실행됨.
- 프록시 핸들러에서는 트랩을 설정하여 특정 기능을 사용할 수 있다. 예를 들어, set 트랩은 프로퍼티 속성 설정 시 실행되는 함수이다.
- Vue는 데이터 객체를 프록시로 래핑하여 데이터 변경을 추적하고, 변경된 데이터에 대해 관련된 부분을 업데이트함.

# 3. 하나의 앱 vs 여러 앱

Vue는 여러 개의 앱을 동시에 사용할 수 있다. 일반적으로는 하나의 Vue 앱을 생성하여 HTML 코드의 특정 부분에 마운트하는 방식을 사용하지만, 여러 개의 Vue 앱을 생성하여 각각 다른 부분을 제어할 수도 있다.  

- 하나의 앱:
    - 이전까지의 강의 섹션에서는 하나의 Vue 앱만 사용됨.
    - HTML 코드에서 해당 앱이 제어할 부분에 마운트하는 방식을 사용함.
    - `Vue.createApp`으로 앱을 생성하고 `app.mount`를 통해 마운트 작업을 수행함.
    - 하나의 앱은 독립적으로 동작하며, 다른 앱과는 연결되지 않음.
- 여러 앱:
    - 여러 개의 Vue 앱을 사용하는 것도 가능함.
    - HTML 코드에서 다른 부분에 각각의 앱을 마운트할 수 있다.
    - `Vue.createApp`을 사용하여 각 앱을 생성하고, 고유한 이름과 기능을 가짐.
    - 각 앱은 독립적으로 동작하며, 다른 앱과는 연결되지 않음.
    - 데이터와 스타일링 등을 각 앱에 독립적으로 설정할 수 있다.

### 예시 코드

```jsx
const app = Vue.createApp({
  data() {
    return {
      currentUserInput: '',
      message: 'Vue is great!',
    };
  },
  methods: {
    saveInput(event) {
      this.currentUserInput = event.target.value;
    },
    setText() {
      this.message = this.currentUserInput;
    },
  },
});

app.mount('#app');

const app2 = Vue.createApp({
  data() {
    return {
      favoriteMeal: 'Pizza'
    };
  }
});

app2.mount('#app2');
```

위의 코드에서는 두 개의 앱이 사용됨.  

- `app`: 첫 번째 앱으로, `data` 객체를 가지고 있으며, 사용자의 입력을 처리하고 메시지를 업데이트하는 기능을 가지고 있다.
- `app2`: 두 번째 앱으로, `favoriteMeal`이라는 데이터 프로퍼티를 가지고 있다.

각 앱은 `mount` 메서드를 사용하여 HTML에서 지정된 섹션에 마운트됨. 스타일링도 각 앱별로 설정할 수 있습니다. 두 개의 앱은 독립적으로 동작하며, 연결되지 않는다. 따라서 서로 독립적인 부분을 화면에서 제어하려면 여러 Vue 앱을 사용해야 함.  

# 4. 탬플릿 이해하기

Vue에서 템플릿(template)은 HTML 코드의 특정 부분을 Vue 앱이 제어하는 영역으로 지정하는 것을 의미함.   

- Vue 앱을 사용하여 HTML 코드의 여러 부분을 제어할 수 있다.
- 각 HTML 코드 부분은 개별적인 Vue 앱의 템플릿으로 지정되어야 함.
- 템플릿은 Vue 앱을 HTML 코드의 DOM 내 특정 위치에 마운트할 때 정의된다.
- Vue 앱의 템플릿은 HTML 파일의 특정 요소에 해당하는 것이며, 해당 요소를 선택하기 위해 선택자(예: `#app`)를 사용함.
- 템플릿은 HTML 코드를 작성하고 애플리케이션에 마운트하는 가장 흔하고 간편한 방식.
- Vue 앱에 템플릿을 추가할 때는 `template` 옵션을 사용할 수도 있다.
- `template` 옵션에는 여러 줄의 문자열을 작성할 수 있으며, 백틱(``)을 사용하여 문자열을 감싸야 함.
- 앱 구성 객체에 `template` 옵션을 추가하여 Vue 앱의 템플릿을 정의할 수 있다.
- 템플릿을 정의한 후에는 `mount` 메서드를 사용하여 Vue 앱을 마운트해야 함.

# 5. Ref(참조) 활용하기

- Ref는 Vue에서 DOM 요소에 액세스하는 기능을 제공.
- Ref는 HTML 요소에 특수 속성으로 추가되며, 사용자가 선택한 식별자를 값으로 가짐.
- Ref를 사용하면 Vue는 해당 요소에 대한 참조를 감지하고 내부에 저장함.
- JavaScript 코드에서는 `$refs`라는 특수 프로퍼티를 사용하여 Ref로 지정한 요소에 액세스할 수 있다.
- Ref를 사용하면 순수 JavaScript 객체로서 해당 DOM 요소에 접근할 수 있으며, JavaScript 코드에서도 사용할 수 있다.
- Ref를 사용하면 필요한 시점에만 DOM 요소의 값을 가져올 수 있다.

Ref는 Vue에서 DOM 요소에 직접적으로 접근해야 하는 경우 유용한 기능이며, 필요한 상황에서 값을 추출하여 사용할 수 있다.  

# 6. Vue가 DOM을 업데이트하는 방법

Vue는 가상 DOM(Virtual DOM)을 사용하여 DOM 업데이트를 처리함. 가상 DOM은 JavaScript 객체로 이루어진 메모리에 위치하며, 실제 DOM의 가상 복사본입니다. Vue는 먼저 가상 DOM을 생성하고, 데이터 변경이 발생할 때마다 새로운 가상 DOM과 이전 가상 DOM을 비교함. 이를 통해 변경된 부분만을 감지하고 업데이트함.  

- Vue의 업데이트 과정은 다음과 같다
1. Vue 인스턴스나 앱에는 데이터와 연산 프로퍼티, 메서드 등이 저장.  
2. 브라우저 DOM은 Vue가 제어하는 템플릿을 렌더링함.    
3. 가상 DOM을 사용하여 템플릿의 콘텐츠가 DOM에 렌더링됨.   
4. 가상 DOM은 동적 부분, 플레이스홀더, 보간, 바인딩을 제거하고 실제 값으로 삽입됨.  
5. 사용자는 변경된 내용을 화면에서 확인할 수 있다.  

Vue는 변경 사항이 발생할 때마다 이전 가상 DOM과 새로운 가상 DOM을 비교함. 이를 통해 변경된 부분을 실제 DOM에 업데이트함. 이 과정에서 전체 페이지를 다시 렌더링하지 않고 필요한 부분만 업데이트되므로 성능이 개선된다.  

가상 DOM을 사용하는 이유는 성능 최적화이다. 변경 사항이 발생할 때마다 브라우저가 실제 DOM을 읽어들이는 작업은 성능 저하 요인이 될 수 있다. 가상 DOM은 JavaScript가 관리하므로 메모리에서 비교 작업을 수행하며, 실제 DOM에 변경된 부분만 업데이트함. 이로써 성능을 향상시킬 수 있다.  

Vue는 다양한 최적화 방법을 제공하여 성능을 개선할 수 있다. 가상 DOM을 활용하는 것 외에도 다른 방법들이 존재하며, 이를 통해 전체 페이지를 재생성하지 않고 업데이트하는 등 성능 향상을 이룰 수 있다.  

# 7. Vue 앱 생명주기 - 이론

- Vue는 상세한 생명주기를 가지고 있으며, 앱이 특정 지점에 도달할 때 실행되는 코드를 정의할 수 있다.
- Vue 앱은 다음과 같은 생명주기 단계를 거친다
    - beforeCreate: Vue 인스턴스가 생성되고 초기화되기 전에 호출된다. 이 시점에서는 아직 화면에 표시되는 내용이 없다.
    - created: Vue 인스턴스가 생성되고 데이터 프로퍼티가 인식되며 일반 앱 구성에 대해서도 인지됩니다. 템플릿을 컴파일할 수 있다.
    - beforeMount: Vue 인스턴스가 화면에 표시되기 직전에 호출된다. 템플릿이 컴파일되고 사용자에게 표시될 구체적인 값으로 대체된다.
    - mounted: Vue 인스턴스가 초기화되고 템플릿 컴파일이 완료된 후 화면에 나타나기 시작함. Vue 앱이 브라우저에 지시 사항을 전달하여 콘텐츠를 추가함.
    - beforeUpdate: 데이터의 변경으로 인해 Vue 인스턴스가 업데이트되기 전에 호출된다. 업데이트를 처리하기 전의 단계이다.
    - updated: 데이터의 변경으로 인해 Vue 인스턴스가 업데이트된 후 호출된다. 업데이트된 내용을 화면에서 볼 수 있다.
    - beforeUnmount: Vue 인스턴스의 마운트가 해제되기 직전에 호출된다. 마운트 해제 전에 정리 코드를 실행할 수 있다.
    - unmounted: Vue 인스턴스의 마운트가 해제된 후 호출된다. 화면의 모든 콘텐츠가 삭제되고 앱 사용이 불가능해진다.

이러한 생명주기 단계는 Vue 앱의 다양한 상태에 따라 필요한 작업을 수행하기 위해 사용될 수 있다.

# 8. Vue 앱 생명주기 - 실습

- Vue 앱의 생명주기 훅(hook)은 앱의 다양한 단계에서 실행되는 메서드다.
- Vue 앱에 생명주기 훅을 추가하는 방법은 메서드를 통해 가능하다.
- 메서드는 자체적으로 호출되거나 이벤트(예: 클릭)에 의해 호출될 수 있다.
- 생명주기 훅 메서드는 `data`나 `methods`와 같은 옵션 바로 옆에 추가할 수 있다.
- 생명주기 훅은 앱의 어디에서든 추가할 수 있으며, 서버에 HTTP 요청을 전송하거나 타이머를 설정하는 등의 작업을 수행할 수 있다.
- Vue 앱의 생성과 마운트, 업데이트, 마운트 해제와 관련된 생명주기 훅에 대한 실습이 제공된다.
- 중단점을 설정하여 특정 생명주기 훅에서 코드 실행을 일시 중지하고 디버깅할 수 있다.
- `beforeCreate`, `created`, `beforeMount`, `mounted`, `beforeUpdate`, `updated`, `beforeUnmount`, `unmounted` 등의 생명주기 훅을 사용하여 앱의 상태 변화를 관찰할 수 있다.
- `app.unmount` 메서드를 사용하여 Vue 앱을 마운트 해제할 수 있다.